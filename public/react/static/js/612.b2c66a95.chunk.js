"use strict";(self.webpackChunkreact_src=self.webpackChunkreact_src||[]).push([[612],{9612:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(4165),o=r(5861),a=r(885),c=r(390);var u=r(7787),s=function(e){return(0,u.v)("/user/profile",e)},i=r(3098),l=r(9692),f=r(1119);var p=r(9142);function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,p.Z)(n.key),n)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=r(1002);function g(e,t){if(t&&("object"===(0,b.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}var y=r(2559),w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,r,n,o=m(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).handleChange=function(t){e.props.onChange(t.target.checked)},e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.name,r=e.checked;return(0,y.jsx)("input",{type:"checkbox",name:t,checked:r,onChange:this.handleChange})}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c.Component),j=w,x=r(1619),k=r(1557),O=function(e){var t=atob(e.user),r=JSON.parse(t),u=(0,c.useState)(r.name||""),p=(0,a.Z)(u,2),d=p[0],h=p[1],v=(0,c.useState)(r.language||localStorage.getItem("selectedLanguage")||"en"),b=(0,a.Z)(v,2),g=b[0],m=b[1],w=(0,c.useState)(r.newsletter_subscription||!1),O=(0,a.Z)(w,2),Z=O[0],S=O[1],_=(0,c.useState)([]),C=(0,a.Z)(_,2),N=C[0],P=C[1];(0,c.useEffect)((function(){E()}),[]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};t=e&&e.languages?e.languages:JSON.parse(localStorage.getItem("availableLanguages")||"{}");var r,n=(r=t,Object.entries(r).map((function(e){var t=(0,a.Z)(e,2);return{value:t[0],label:t[1]}})));P(n)},T=function(){var e=(0,o.Z)((0,n.Z)().mark((function e(){var t,r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={User:{name:d,language:g,newsletter_subscription:Z?"1":"0"}},e.prev=2,{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},e.next=6,s(t);case 6:return r=e.sent,e.next=9,r.json();case 9:if("success"!==(o=e.sent).status){e.next=19;break}return e.next=13,E(o);case 13:localStorage.setItem("selectedLanguage",g),(0,i.Lb)(),(0,i.Hh)(o.translations),window.location.reload(!0),e.next=20;break;case 19:console.error("Update was not successful:",o);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),console.error("Error in handleModifyProfile:",e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)("form",{id:"w0",className:"form-vertical kv-form-bs3",children:[(0,y.jsx)(k.Z,{label:(0,i.__)("Name"),children:(0,y.jsx)(l.Z,{id:"user-name",className:"form-control",name:"User[name]",value:d,onChange:function(e){return h(e.target.value)}})}),(0,y.jsx)(k.Z,{label:(0,i.__)("Language"),children:(0,y.jsx)(f.Z,{id:"user-language",className:"form-control",name:"User[language]",value:g,onChange:function(e){return m(e.target.value)},options:N})}),(0,y.jsx)(k.Z,{label:(0,i.__)("Newsletter subscription"),children:(0,y.jsx)(j,{id:"user-newsletter_subscription",name:"User[newsletter_subscription]",checked:Z,onChange:function(e){return S(e)}})}),(0,y.jsx)(x.Z,{buttons:[{label:(0,i.__)("Update profile"),class:"btn btn-primary",onClick:T}]})]})}},1119:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(1413);function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r(390);var a=r(3098),c=r(2559),u=["options","value"],s=function(e){var t=e.options,r=void 0===t?[]:t,s=e.value,i=o(e,u);return Array.isArray(r)||(console.error("DropdownInput received non-array options:",r),r=[]),0===r.length?(0,c.jsx)(c.Fragment,{}):(0,c.jsxs)("select",(0,n.Z)((0,n.Z)({value:s},i),{},{children:[!s&&(0,c.jsx)("option",{value:"",children:(0,a.__)("Select an option")}),r.map((function(e){return(0,c.jsx)("option",{value:e.value,children:e.label},e.value)}))]}))}},1619:function(e,t,r){r(390);var n=r(2559);t.Z=function(e){var t=e.buttons,r=void 0===t?[]:t;return(0,n.jsx)("div",{className:"ButtonGroup",children:r.map((function(e,t){return(0,n.jsx)("button",{type:"button",className:e.class,onClick:e.onClick,children:e.label},t)}))})}},1557:function(e,t,r){r.d(t,{Z:function(){return o}});r(390);var n=r(2559),o=function(e){var t=e.label,r=e.hasStar,o=void 0!==r&&r,a=e.error,c=e.children;return(0,n.jsxs)("div",{className:"form-group highlight-addon row",children:[(0,n.jsx)("div",{className:"form-group col-md-3",children:t&&(0,n.jsx)("label",{className:"control-label ".concat(o?"has-star":""),children:t})}),(0,n.jsx)("div",{className:"form-group col-md-5",children:c}),a&&(0,n.jsx)("div",{className:"col-12 help-block help-block-error",children:a})]})}},9692:function(e,t,r){var n=r(1413),o=(r(390),r(2559));t.Z=function(e){return(0,o.jsx)("input",(0,n.Z)({type:"text"},e))}},7787:function(e,t,r){r.d(t,{U:function(){return u},v:function(){return s}});var n=r(4165),o=r(1413),a=r(5861);function c(){var e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}var u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,c,u,s=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},a=s.length>2&&void 0!==s[2]?s[2]:{},c=new URL(t),Object.keys(r).forEach((function(e){return c.searchParams.append(e,r[e])})),e.next=6,fetch(c,{method:"GET",headers:(0,o.Z)({"Content-Type":"application/json"},a)});case 6:return u=e.sent,e.abrupt("return",i(u));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-Csrf-Token":c(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(r)});case 3:if((o=e.sent).ok){e.next=6;break}throw new Error("Server responded with status: ".concat(o.status));case 6:return e.abrupt("return",o);case 9:throw e.prev=9,e.t0=e.catch(0),console.error("Error during POST request:",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}},3098:function(e,t,r){r.d(t,{Hh:function(){return o},Lb:function(){return a},__:function(){return c}});var n="translations",o=function(e){try{var t=JSON.stringify(e);localStorage.setItem(n,t)}catch(r){console.error("Failed to save translations to localStorage:",r)}},a=function(){try{localStorage.removeItem(n)}catch(e){console.error("Failed to clear translations from localStorage:",e)}},c=function(e){try{var t=localStorage.getItem(n);return t&&JSON.parse(t)[e]||e}catch(r){return console.error("Failed to retrieve translation from localStorage:",r),null}}}}]);
//# sourceMappingURL=612.b2c66a95.chunk.js.map